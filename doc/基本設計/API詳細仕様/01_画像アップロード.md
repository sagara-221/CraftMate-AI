# 01. 画像アップロード API 詳細仕様

## 1. エンドポイント情報

| 項目     | 内容                                      |
|----------|-------------------------------------------|
| メソッド | POST                                      |
| URL      | /api/upload                               |
| 概要     | 画像ファイルをアップロードし、plan_id（UUID）を発行する |

## 2. リクエストパラメータ

| 区分             | 名称         | 内容                       |
|------------------|--------------|----------------------------|
| パスパラメータ   | なし         | -                          |
| クエリパラメータ | なし         | -                          |
| リクエストボディ | Content-Type | multipart/form-data        |
|                  | file         | アップロードする画像ファイル|

## 3. レスポンス

| ステータスコード | 意味                                         |
|------------------|----------------------------------------------|
| 200 OK           | 正常にアップロードされた場合                  |
| 400 Bad Request  | ファイルが添付されていない、または不正な形式の場合 |
| 500 Internal Server Error | サーバ内部エラー                    |

| 成功時のレスポンス例         |
|-----------------------------|
| { "plan_id": "uuid" }      |

| 失敗時のレスポンス例         |
|-----------------------------|
| { "error": "エラーメッセージ" } |

## 4. バリデーションルール

| ルール内容                                      |
|-------------------------------------------------|
| ファイルが添付されていること                    |
| サポートされている画像形式（例: jpg, png, jpeg）|
| ファイルサイズ上限（例: 10MB など）             |

## 5. 認証・認可

| 内容                                 |
|--------------------------------------|
| 現状なし（将来的に認証追加の可能性あり） |

## 6. 備考

| 項目         | 内容                                                                 |
|--------------|----------------------------------------------------------------------|
| 特記事項     | 同一ファイルの複数回アップロード時は新たなplan_idが発行される           |
|              | ファイル名の重複は問題ない                                           |
| 使用例（curl）| curl -X POST -F "file=@./input/bookshelf.jpg" http://localhost:8000/api/upload |
