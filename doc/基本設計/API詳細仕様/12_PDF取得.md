# 12. PDF取得 API 詳細仕様

## 1. エンドポイント情報

| 項目     | 内容                                              |
|----------|---------------------------------------------------|
| メソッド | GET                                               |
| URL      | /api/{plan_id}/manual_pdf                         |
| 概要     | 指定plan_idの設計書PDFを返却する                   |

## 2. リクエストパラメータ

| 区分             | 名称     | 内容                         |
|------------------|----------|------------------------------|
| パスパラメータ   | plan_id  | 画像アップロード時に発行されたUUID |
| クエリパラメータ | なし     | -                            |
| リクエストボディ | なし     | -                            |

## 3. レスポンス

| ステータスコード | 意味                                         |
|------------------|----------------------------------------------|
| 200 OK           | 正常にPDFファイルを返却                       |
| 400 Bad Request  | plan_idが不正な場合                          |
| 404 Not Found    | 指定plan_idが存在しない場合、PDF未生成の場合  |
| 500 Internal Server Error    | 内部エラー                 |

### 成功時のレスポンス

- ヘッダー:
    - Content-Type: application/pdf
    - Content-Disposition: attachment; filename="design_document.pdf"
- ボディ:
    - base64でエンコードされたPDFコンテンツ

### 失敗時のレスポンス

- ヘッダー:
    - Content-Type: application/json
- ボディ:
    - { "error": "エラーメッセージ" }

## 4. バリデーションルール

| ルール内容                        |
|-----------------------------------|
| plan_idがUUID形式であること       |

## 5. 認証・認可

| 内容                                 |
|--------------------------------------|
| 現状なし（将来的に認証追加の可能性あり） |

## 6. 備考

| 項目         | 内容                                                                 |
|--------------|----------------------------------------------------------------------|
| 特記事項     | PDF取得可否確認APIでready: trueの場合のみ利用可能                    |
| 使用例（curl）| curl -X GET http://localhost:8000/api/123e4567-e89b-12d3-a456-426614174000/manual_pdf --output manual.pdf |
