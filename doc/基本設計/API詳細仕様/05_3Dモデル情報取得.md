# 05. 3Dモデル情報取得 API 詳細仕様

## 1. エンドポイント情報

| 項目     | 内容                                              |
|----------|---------------------------------------------------|
| メソッド | GET                                               |
| URL      | `/api/{plan_id}/model`                            |
| 概要     | 指定plan_idの3Dモデル（.obj等）を返却する           |

## 2. リクエストパラメータ

| 区分             | 名称     | 内容                         |
|------------------|----------|------------------------------|
| パスパラメータ   | plan_id  | 画像アップロード時に発行されたUUID |
| クエリパラメータ | なし     | -                            |
| リクエストボディ | なし     | -                            |

## 3. レスポンス

| ステータスコード | 意味                                         |
|------------------|----------------------------------------------|
| 200 OK           | 正常に3Dモデルデータ（objファイルのテキスト）を返却 |
| 400 Bad Request  | plan_idが不正な場合                          |
| 404 Not Found    | 指定plan_idが存在しない場合                  |
| 500 Internal Server Error    | 内部エラー                 |

| 成功時のレスポンス例         |
|-----------------------------|
| OBJファイルのテキスト内容（例：gやvやfで始まる行が並ぶ）<br>※gで指定するグループ名は部品名と一致すること         |

| 失敗時のレスポンス例         |
|-----------------------------|
| { "error": "エラーメッセージ" } |

### レスポンスヘッダー例
- Content-Type: `text/plain; charset=utf-8`
- Content-Disposition: `inline; filename="model.obj"`（任意）

#### OBJファイル形式のテキスト内容例
```
g 部品A
v 0.123 0.234 0.345
v 0.456 0.567 0.678
f 1 2 3
...
```

## 4. バリデーションルール

| ルール内容                        |
|-----------------------------------|
| plan_idがUUID形式であること       |

## 5. 認証・認可

| 内容                                 |
|--------------------------------------|
| 現状なし（将来的に認証追加の可能性あり） |

## 6. 備考

| 項目         | 内容                                                                 |
|--------------|----------------------------------------------------------------------|
| 特記事項     | 3Dモデル取得可否確認APIでready: trueの場合のみ利用可能               |
| 使用例（curl）| `curl -X GET http://localhost:8000/api/123e4567-e89b-12d3-a456-426614174000/model` |

---

### フロントエンド実装のポイント
- レスポンスはテキスト（objファイル内容）として受け取る
- three.jsのOBJLoader等にそのまま渡して描画可能
- ファイル保存やバイナリ変換は不要
